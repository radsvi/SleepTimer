<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:models="clr-namespace:SleepTimer.Models"
             xmlns:viewModels="clr-namespace:SleepTimer.ViewModels"
             x:Class="SleepTimer.Views.SleepLogsPage"
             x:DataType="viewModels:SleepLogsVM"
             Title="Sleep Logs">
    <AbsoluteLayout Margin="5">
        <Grid
            AbsoluteLayout.LayoutBounds="0,0,1,AutoSize"
            AbsoluteLayout.LayoutFlags="WidthProportional"
            ColumnDefinitions="*,*,*">
            <Button Text="{Binding AppPreferences.LogFilter, StringFormat='Display: {0}'}" Command="{Binding LogsHandler.SelectFilterCommand}" Grid.Column="0" Grid.ColumnSpan="2" Margin="3" />
            <Button Text="Delete Logs" Command="{Binding LogsHandler.ClearCommand}" Grid.Column="2" Margin="3" />
        </Grid>

        <CollectionView
            AbsoluteLayout.LayoutBounds="0,55,1,1" AbsoluteLayout.LayoutFlags="SizeProportional"
            SelectionMode="None" ItemsSource="{Binding LogsHandler.DisplayEntries}" EmptyView="No log entries">
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="models:LogEntry">
                    <HorizontalStackLayout Margin="5,0">
                        <Label Text="{Binding Date, StringFormat='{0:MM/dd/yyyy HH:mm:ss}'}" WidthRequest="145" />
                        <Label Text="{Binding Text}" />
                    </HorizontalStackLayout>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </AbsoluteLayout>

</ContentPage>